<!doctype html>
<html class="no-js" lang="{{ request.locale.iso_code }}">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="theme-color" content="">

    {%- if canonical_url != blank -%}
      <link rel="canonical" href="{{ canonical_url }}">
    {%- endif -%}

    {%- if settings.favicon != blank -%}
      <link rel="shortcut icon" href="{{ settings.favicon | img_url: '32x32' }}" type="image/png">
    {%- endif -%}

    {%- capture seo_title -%}
      {%- if request.page_type == 'search' and search.performed == true -%}
        {{ 'templates.search.heading' | t: count: search.results_count }}: {{ 'templates.search.results_with_count' | t: terms: search.terms, count: search.results_count }}
      {%- else -%}
        {{ page_title }}
      {%- endif -%}
      {%- if current_tags -%}
        {%- assign meta_tags = current_tags | join: ', ' -%} &ndash; {{ 'general.meta.tags' | t: tags: meta_tags -}}
      {%- endif -%}
      {%- if current_page != 1 -%}
        &ndash; {{ 'general.meta.page' | t: page: current_page }}
      {%- endif -%}
      {%- assign escaped_page_title = page_title | escape -%}
      {%- unless escaped_page_title contains shop.name -%}
        &ndash; {{ shop.name }}
      {%- endunless -%}
    {%- endcapture -%}
    <title>{{ seo_title | strip }}</title>

    {%- if page_description -%}
      <meta name="description" content="{{ page_description | escape }}">
    {%- endif -%}

    <script>
      if (!window.navigator.userAgent.match(/(MSIE|Trident)/)) {
        document.documentElement.className = document.documentElement.className.replace('no-js', 'js');
      }
    </script>
    {{ content_for_header }}

    {% render 'css-variables' %}
    <style>
      /* ðŸš§ TODO Remove Temporary "Critical" Styling ðŸš§ */
      html, body { height: 100%; width: 100%; }
      body { display: flex; flex-direction: column; }
    </style>

    <link rel="stylesheet" href="{{ 'theme.min.css' | asset_url }}">
  </head>

  <body>
    <a class="skip-to-content-link button visually-hidden" href="#MainContent">
      {{ 'general.accessibility.skip_to_content' | t }}
    </a>

    <div id="SearchDrawer"
      class="section--default stage"
      data-popup-stage="search"
      role="dialog"
      aria-modal="true"
      aria-labelledby="SearchModalHeading"
    >
      <div class="stage__overlay" data-popup-close="search"></div>
      <div data-popup="search" class="search-drawer section__border section__color" data-popup-focus="search" tabindex="-1">
        <h2 id="SearchModalHeading" class="visually-hidden">{{ 'templates.search.search' | t }}</h2>
        <form action="{{ routes.search_url }}" method="get" role="search" class="search-drawer__form">
          <div class="field search-field{% if search.terms != blank %} floating-label{% endif %}" data-form-field>
            <label class="field__label" for="Search">{{ 'templates.search.search' | t }}</label>
            <input class="field__input" id="Search" type="search" name="q"/>
            <button type="submit" class="field__button link" aria-label="{{ 'templates.search.search' | t }}">
              {% render 'icon-search' %}
            </button>
          </div>
        </form>
        <button class="header-top__icon link" aria-label="{{ 'general.accessibility.close_modal' | t }}" data-popup-close="search">
          {% render 'icon-close' %}
        </button>
      </div>
    </div>

    {% section 'header' %}

    {%- unless request.page_type == 'cart' -%}
      <div class="stage" data-popup-stage="cart">
        <div class="stage__overlay" data-popup-close="cart"></div>

        <div class="cart drawer drawer--right{% if cart.items.size == 0 %} is-empty{% endif %}"
          role="dialog"
          aria-modal="true"
          aria-labelledby="drawer-title"
          data-cart
          data-render-cart-items
          data-popup="cart">

          <div class="drawer__header">
            <h2 class="drawer__title" id="drawer-title">{{ 'sections.cart.title' | t }}</h2>
            <button type="button"
              class="drawer__close-button button button--square button--text"
              aria-label="{{ 'general.accessibility.close_modal' | t }}"
              data-popup-close="cart"
              data-popup-focus="cart"
              data-cart-close>

              {%- render 'icon-close' -%}
            </button>
          </div>

          {%- render 'cart', render_view_cart: true -%}
        </div>
      </div>
    {%- endunless -%}

    <main id="MainContent" class="content-for-layout" role="main" tabindex="-1">
      {{ content_for_layout }}
    </main>

    {% section 'footer' %}

    <script>
      window.theme = {
        rootUrl: "{{ routes.root_url }}",
        strings: {
          cartError: {{ 'cart.cart_error' | t | json }},
          external: {{ 'general.accessibility.link_messages.external' | t | json }},
          newWindow: {{ 'general.accessibility.link_messages.new_window' | t | json }},
          newWindowExternal: {{ 'general.accessibility.link_messages.new_window_and_external' | t | json }},
          addToCart: {{ 'products.product.add_to_cart' | t | json }},
          salePrice: {{ 'products.product.sale_price' | t | json }},
          soldOut: {{ 'products.product.sold_out' | t | json }},
          unavailable: {{ 'products.product.unavailable' | t | json }},
          subtotal: {{ 'sections.cart.subtotal' | t | json }},
          quantityError: {{ 'sections.cart.cart_quantity_error_html' | t: quantity: "[quantity]", title: "[title]" | json }},
          loading: {{ 'general.accessibility.loading' | t | json }},
        },
        moneyFormat: {{ shop.money_format | json }},
      };
    </script>
    <script src="{{ 'vendor.min.js' | asset_url }}" defer="defer"></script>

    {%- if request.page_type contains 'customers/' -%}
      <script src="{{ 'shopify_common.js' | shopify_asset_url }}" defer="defer"></script>
    {%- endif -%}

    <script src="{{ 'theme.min.js' | asset_url }}" defer="defer"></script>

    <ul hidden>
      <li id="a11y-refresh-page-message">{{ 'general.accessibility.refresh_page' | t }}</li>
      <li id="a11y-selection-message">{{ 'general.accessibility.selection_help' | t }}</li>
      <li id="a11y-new-window">{{ 'general.accessibility.link_messages.new_window' | t }}</li>
    </ul>
  </body>
</html>
